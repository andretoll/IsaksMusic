@page
@model IsaksMusic.Pages.Admin.Categories.CategoriesModel

@{
    ViewData["Title"] = "Categories";
    Layout = "~/Pages/Admin/_AdminLayout.cshtml";
}

<!-- Show success message if any -->
@if (!string.IsNullOrEmpty(Model.Message))
{
    <script>
        window.onload = function () {

            ShowSuccessSnackbar("@Model.Message");
        }
    </script>
}

<div>
    <h2>Categories</h2>
    <hr />
    <p>Below you can find each category with their respective amount of songs.<br />Click the <i class="fas fa-times-circle fa-sm text-danger"></i> icon to delete a category.</p>
    <a title="Add category" class="btn btn-success text-white" data-toggle="modal" data-target="#newCategoryModal">Add Category</a>
    @if (Model.ErrorMessage != null)
    {
        <div class="alert alert-danger mt-3" role="alert">
            @Model.ErrorMessage
        </div>
    }
</div>
<div id="categoryList">
    <ul>
        @foreach (var category in Model.Categories)
        {
            <li><a asp-page="/">@category.Name (@category.SongCategories.Count)</a><a class="ml-2 text-danger" data-toggle="tooltip" title="Delete"><i class="fas fa-times-circle fa-sm"></i></a></li>
        }
    </ul>
</div>

<!-- New Category Modal -->
<div class="modal fade" id="newCategoryModal">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <!-- Modal Header -->
            <div class="modal-header">
                <h4 class="modal-title text-yellow">Add Category</h4>
                <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            <!-- Modal body -->
            <div class="modal-body">
                <form id="songForm" method="post" enctype="multipart/form-data">
                    <div asp-validation-summary="ModelOnly"></div>
                    <div class="form-group">
                        <label asp-for="Category.Name"></label>
                        <input asp-for="Category.Name" class="form-control" autocomplete="off" />
                        <span asp-validation-for="Category.Name"></span>
                    </div>
                    <div class="form-group text-center mb-0">
                        <input type="submit" class="btn btn-success" value="Save" />
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

@*<p>
        <a asp-page="Create">Create New</a>
    </p>
    <table class="table">
        <thead>
            <tr>
                    <th>
                        @Html.DisplayNameFor(model => model.Category[0].Name)
                    </th>
                <th></th>
            </tr>
        </thead>
        <tbody>
    @foreach (var item in Model.Category) {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.Name)
                </td>
                <td>
                    <a asp-page="./Edit" asp-route-id="@item.Id">Edit</a> |
                    <a asp-page="./Details" asp-route-id="@item.Id">Details</a> |
                    <a asp-page="./Delete" asp-route-id="@item.Id">Delete</a>
                </td>
            </tr>
    }
        </tbody>
    </table>*@
