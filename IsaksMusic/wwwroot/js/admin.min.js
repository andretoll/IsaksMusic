function startLoadingAnimation(){$("#songUploadAnim").removeClass("d-none");$("#songForm").find(":submit").hide()}function deleteSong(n){var t=confirm("Are you sure you want to delete this song?");t&&$.ajax({type:"Get",url:"/admin/songs?handler=Delete",data:{id:n},success:function(){var t=$("#row_"+n);ShowSuccessSnackbar("Song removed");removeTableRow(t)}})}function removeTableRow(n){$(n).fadeOut(500,function(){n.remove()})}function deleteCategory(n){var t=$("#category_"+n),i=confirm("Are you sure you want to delete this category?");i&&$.ajax({type:"Get",url:"/admin/categories?handler=Delete",data:{id:n},success:function(){ShowSuccessSnackbar("Category removed");$(t).remove()},error:function(){location.reload()}})}function editCategory(n,t){var i=$(t).html();categoryValue!==i&&$.ajax({type:"Get",url:"/admin/categories?handler=Edit",data:{id:n,name:i},success:function(){ShowSuccessSnackbar("Category updated")}})}function featureSong(n,t){disableCheckboxes(!0);$.ajax({type:"Get",url:"/admin/songs?handler=Feature",data:{id:n,featured:t},success:function(){disableCheckboxes(!1);ShowSuccessSnackbar("Changes saved")}})}function disableCheckboxes(n){$(".feature-check").each(function(){n?$(this).attr("disabled",!0):$(this).attr("disabled",!1)})}var categoryValue,categoryId,songOrder;$(document).ready(function(){$("a.active").removeClass("active");$('a[href="'+location.pathname+'"]').closest(".list-group-item").addClass("active");$("#songForm").submit(function(){$("#songForm").valid()&&startLoadingAnimation()});$("#songUpload").change(function(){if(this.files.length>0){var t=$("#songUpload")[0].files[0],n=t.name.split(".").pop();n==="wav"||n==="mp3"?$(this).addClass("file-valid"):$(this).removeClass("file-valid")}else $(this).removeClass("file-valid")});$(".list-item-editable").click(function(){this.contentEditable=!0;this.focus();categoryId=$(this).parent("li").attr("id").split("_").pop();categoryValue=$(this).html()});$(".list-item-editable").on("keypress blur",function(n){if(n.keyCode&&n.keyCode===13||n.type==="blur")return this.contentEditable=!1,$(this).html().length===0?$(this).html(categoryValue):editCategory(categoryId,this),!1});$(".list-item-editable").on("cut copy paste",function(n){n.preventDefault()});$("input[type=checkbox]").iCheck({checkboxClass:"icheckbox_square-red",radioClass:"iradio_square-red",increaseArea:"20%"});$(".feature-check").on("ifClicked",function(){var n=$(this).closest("tr").attr("id").split("_").pop(),t=$(this).closest("tr");$(this).is(":checked")?featureSong(n,!1):(featureSong(n,!0),$(t).addClass("featured-row"))});$(".feature-check").on("ifChecked",function(){$(this).removeClass("feature-check");$(".feature-check").iCheck("uncheck");$(this).addClass("feature-check")});$(".feature-check").on("ifUnchecked",function(){var n=$(this).closest("tr");$(n).removeClass("featured-row")});$("#songTable").tableDnD({onDragClass:"row-drag",onDrop:function(){var n,t;$("#saveOrderBtn").fadeIn(500);var u=$.tableDnD.serialize(),i=u.split("&"),r=[];for(n=0;n<i.length;n++)t=i[n].split("="),t[1]!==null&&t[1]!==""&&r.push(t[1].split("_").pop());songOrder=r.join(",")}});$("#saveOrderBtn").on("click",function(){$.ajax({type:"Get",url:"/admin/songs?handler=Reorder",data:{orderString:songOrder},success:function(){$("#saveOrderBtn").fadeOut(250);ShowSuccessSnackbar("Order saved")}})})});