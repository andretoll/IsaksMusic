function startLoadingAnimation(){$("#songUploadAnim").removeClass("d-none");$("#songForm").find(":submit").hide()}function deleteSong(n){var t=$("#row_"+n),i=confirm("Are you sure you want to delete this song?");i&&$.ajax({type:"Get",url:"/admin/songs?handler=Delete",data:{id:n},success:function(){ShowSuccessSnackbar("Song removed");$(t).fadeOut(500,function(){t.remove()})}})}function deleteCategory(n){var t=$("#category_"+n),i=confirm("Are you sure you want to delete this category?");i&&$.ajax({type:"Get",url:"/admin/categories?handler=Delete",data:{id:n},success:function(){ShowSuccessSnackbar("Category removed");$(t).fadeOut(500,function(){t.remove()})},error:function(){location.reload()}})}function editCategory(n,t){var i=$(t).html();categoryValue!==i&&$.ajax({type:"Get",url:"/admin/categories?handler=Edit",data:{id:n,name:i},success:function(){ShowSuccessSnackbar("Category updated")}})}function featureSong(n,t){disableCheckboxes(!0);$.ajax({type:"Get",url:"/admin/songs?handler=Feature",data:{id:n,featured:t},success:function(){disableCheckboxes(!1);ShowSuccessSnackbar("Changes saved")}})}function disableCheckboxes(n){$(".feature-check").each(function(){n?$(this).attr("disabled",!0):$(this).attr("disabled",!1)})}function deleteNewsEntry(n){var t=$("#entryContainer_"+n),i=confirm("Are you sure you want to delete this entry?");i&&$.ajax({type:"Get",url:"/admin/news?handler=Delete",data:{id:n},success:function(){ShowSuccessSnackbar("Entry removed");$(t).fadeOut(500,function(){t.remove()})},error:function(){location.reload()}})}function paragraphBreaks(){var n=$(".news-entry-content");$(n).each(function(){var n=$(this).children(".news-body-text");$(n).text().indexOf("<br>")>=0&&$(n).html($(n).text())})}function checkTextOverflow(){var n=$(".news-entry-content");$(n).each(function(){if(this.offsetHeight<this.scrollHeight||this.offsetWidth<this.scrollWidth){var n=$(this).parent().children(".collapse-news-btn");$(n).show()}})}function getEntriesByDate(n){$.ajax({type:"GET",url:"/admin/news/index?handler=Filter",contentType:'application/json; charset=utf-8"',data:{dateFilter:n},success:function(n){$("#adminNewsEntries").html(n);paragraphBreaks();checkTextOverflow();checkNewsEntryCount($("#adminNewsEntries").children().length)},error:function(n){console.log(n)}})}function checkNewsEntryCount(n){n===0?$("#noNewsAlert").show():$("#noNewsAlert").hide()}function openImgModal(n){var t=document.getElementById("newsImgModal"),i=document.getElementById("newsImgHeader"),r=document.getElementById("newsImg");$(t).modal("toggle");i.innerHTML=n;r.src=n}var categoryValue,categoryId,songOrder;$(document).ready(function(){var t,n,i;$('a[href="'+location.pathname+'"]').length===0?(t=location.pathname.substr(0,location.pathname.lastIndexOf("/")),$('a[href="'+t+'"]').closest(".list-group-item").addClass("active")):($("a.active").removeClass("active"),$('a[href="'+location.pathname+'"]').closest(".list-group-item").addClass("active"));$("#adminSidemenuCollapse").on("click",function(){var n=$("#adminSidemenuCollapse").children("i");n.hasClass("down")?n.removeClass("down"):n.addClass("down")});$("#songForm").submit(function(){$("#songForm").valid()&&startLoadingAnimation()});$("#songUpload").change(function(){if(this.files.length>0){var t=$("#songUpload")[0].files[0],n=t.name.split(".").pop();n==="wav"||n==="mp3"?$(this).addClass("file-valid"):$(this).removeClass("file-valid")}else $(this).removeClass("file-valid")});$(".list-item-editable").click(function(){this.contentEditable=!0;this.focus();categoryId=$(this).parent("li").attr("id").split("_").pop();categoryValue=$(this).html()});$(".list-item-editable").on("keypress blur",function(n){if(n.keyCode&&n.keyCode===13||n.type==="blur")return this.contentEditable=!1,$(this).html().length===0?$(this).html(categoryValue):editCategory(categoryId,this),!1});$(".list-item-editable").on("cut copy paste",function(n){n.preventDefault()});$(".feature-check").on("ifClicked",function(){var n=$(this).closest("tr").attr("id").split("_").pop(),t=$(this).closest("tr");$(this).is(":checked")?featureSong(n,!1):(featureSong(n,!0),$(t).addClass("featured-row"))});$(".feature-check").on("ifChecked",function(){$(this).removeClass("feature-check");$(".feature-check").iCheck("uncheck");$(this).addClass("feature-check")});$(".feature-check").on("ifUnchecked",function(){var n=$(this).closest("tr");$(n).removeClass("featured-row")});$("#songTable").tableDnD({onDragClass:"row-drag",onDrop:function(){for(var n,u=$.tableDnD.serialize(),i=u.split("&"),r=[],t=0;t<i.length;t++)n=i[t].split("="),n[1]!==null&&n[1]!==""&&r.push(n[1].split("_").pop());$("#saveOrderBtn").fadeIn(500);songOrder=r.join(",")}});$("#saveOrderBtn").on("click",function(){$.ajax({type:"Get",url:"/admin/songs?handler=Reorder",data:{orderString:songOrder},success:function(){$("#saveOrderBtn").fadeOut(250);ShowSuccessSnackbar("Order saved")}})});paragraphBreaks();checkTextOverflow();checkNewsEntryCount($("#adminNewsEntries").children().length);n=$("#datepicker").val().replace("/","-");i=new RegExp("/","g");n=n.replace(i,"-");$("#datepicker").datepicker({showAnim:"slideDown",showOtherMonths:!0,selectOtherMonths:!0,changeMonth:!0,changeYear:!0,dateFormat:"yy-mm-dd",altFormat:"yy-mm-dd",maxDate:"+0m",defaultDate:n,onSelect:function(n){getEntriesByDate(n)}})});